<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title><%= he.decode(event.title) %> – Celestial Gatherings</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Platypi:wght@400;600&family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>

    <link rel="stylesheet" href="/css/styles-core.css"/>
    <link rel="stylesheet" href="/css/styles-event-detail.css"/>
</head>
<body>
<a class="skip-link" href="#main">Skip to content</a>
<%- include('partials/header') %>
<%- include('partials/nav', { active: 'events' }) %>

<main id="main" class="container">
    <article class="event-detail">
        <header class="event-head">
            <h1 class="event-title"><%= he.decode(event.title) %></h1>
        </header>

        <figure class="event-media">
            <img
                    src="<%= event.image || '/images/no_image.png' %>"
                    alt="<%= he.decode(event.title) %>"
                    class="event-hero-img"
                    loading="lazy"
                    decoding="async"
                    width="1200"
                    height="675"
            />
        </figure>

        <section class="event-meta text-center" aria-labelledby="event-meta-heading">
            <h2 id="event-meta-heading" class="sr-only">Event Info</h2>

            <div class="meta-row">
                <span class="meta">
                  <i class="far fa-user" aria-hidden="true"></i>
                  Host:
                    <% if (event.host && event.host.firstName) { %>
                        <%= event.host.firstName %> <%= event.host.lastName %>
                    <% } else { %>
                        Celestial Gatherings
                    <% } %>
                </span>

                <span class="meta">
                  <i class="far fa-clock" aria-hidden="true"></i>
                  <time datetime="<%= event.startDateTimeISO %>"><%= event.startDateTimeFormatted %></time> –
                  <time datetime="<%= event.endDateTimeISO %>"><%= event.endDateTimeFormatted %></time>
                </span>

                <span class="meta">
                  <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                  <%= he.decode(event.location) %>
                </span>
            </div>

            <span class="badge"><%= event.category %></span>
            <div class="divider"></div>
        </section>

        <section class="event-prose prose" aria-labelledby="details-heading">
            <h2 id="details-heading" class="sr-only">Details</h2>
            <p><%= he.decode(event.details) %></p>
        </section>

        <section class="rsvp" aria-labelledby="rsvp-heading">
            <h2 id="rsvp-heading">RSVP</h2>
            <form action="/events/<%= event._id %>/rsvp" method="POST" class="rsvp-form" aria-label="RSVP to this event">
                <div class="rsvp-row">
                    <button type="submit" name="status" value="YES" class="rsvp-button rsvp-yes">Yes</button>
                    <button type="submit" name="status" value="NO" class="rsvp-button rsvp-no">No</button>
                    <button type="submit" name="status" value="MAYBE" class="rsvp-button rsvp-maybe">Maybe</button>
                </div>
            </form>
            <p id="yesCount" class="rsvp-count" aria-live="polite">Total “Yes” RSVPs: <%= yesRSVPCount %></p>
        </section>
    </article>
</main>

<%- include('partials/footer') %>
</body>
</html>





